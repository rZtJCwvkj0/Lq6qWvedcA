(function() {
    'use strict';

    const container = document.createElement('div');
    container.style.position = 'fixed';
    container.style.top = '100px';
    container.style.left = '100px';
    container.style.width = '200px';
    container.style.backgroundColor = '#333';
    container.style.border = '2px solid #000';
    container.style.borderRadius = '10px';
    container.style.padding = '10px';
    container.style.color = '#fff';
    container.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
    container.style.zIndex = '10000';
    container.style.cursor = 'move';
    container.style.display = 'block';

    const title = document.createElement('div');
    title.textContent = 'Gaming-style cheats';
    title.style.fontSize = '16px';
    title.style.marginBottom = '10px';
    title.style.textAlign = 'center';
    title.style.borderBottom = '1px solid #555';
    title.style.paddingBottom = '5px';
    container.appendChild(title);

    let isDragging = false;
    let offsetX, offsetY;

    container.addEventListener('mousedown', (e) => {
        isDragging = true;
        offsetX = e.clientX - container.offsetLeft;
        offsetY = e.clientY - container.offsetTop;
    });

    document.addEventListener('mousemove', (e) => {
        if (isDragging) {
            container.style.left = `${e.clientX - offsetX}px`;
            container.style.top = `${e.clientY - offsetY}px`;
        }
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
    });

    const labels = ['God mode', 'Ghost mode', 'Invisibility', 'Instakill', 'Crash'];
    const state = {};

    let rt = false;
    let rt2 = false;
    let rt3 = false;
    let rt4 = false;
    let rt5 = false;

    const runCode = (label, stateValue) => {
        if (label === 'God mode') {
            rt = stateValue;
        } else if (label === 'Ghost mode') {
            rt2 = stateValue;
        } else if (label === 'Invisibility') {
            rt3 = stateValue;
        } else if (label === 'Instakill') {
            rt4 = stateValue;
        } else if (label === 'Crash') {
            rt5 = stateValue;
        }
    };

    const activateWebSocketCode = () => {
        let messageSymbol = Symbol();

        window.WebSocket = new Proxy(WebSocket, {
            construct(target, args) {
                const instance = Reflect.construct(target, args);

                if (args[0]?.includes("games")) {
                    messageSymbol = instance;
                }

                const originalSend = instance.send;
                instance.send = function(data) {
                    if (rt2 && (data instanceof ArrayBuffer && data.byteLength >= 80 && data.byteLength <= 90)) {
                        return;
                    }
                    originalSend.call(this, data);
                };

                const originalSend2 = instance.send;
                instance.send = function(data) {
                    if (rt3 && (data instanceof ArrayBuffer && data.byteLength >= 80 && data.byteLength <= 90)) {
                        let byteArray = new Uint8Array(data);

                        const positionsToModify = [30];

                        positionsToModify.forEach(pos => {
                            if (pos < byteArray.length) {
                                byteArray[pos] = 90;
                            }
                        });

                        const modifiedData = byteArray.buffer;

                        originalSend2.call(this, modifiedData);
                        return;
                    }

                    originalSend2.call(this, data);
                };

                const originalSend3 = instance.send;
                instance.send = function(data) {
                    if (rt4 && (data instanceof ArrayBuffer && data.byteLength >= 201 && data.byteLength <= 220)) {
                        for (let i = 0; i < 10; i++) {
                            originalSend3.call(this, data);
                        }
                        return;
                    }
                    originalSend3.call(this, data);
                };

                Object.defineProperty(instance, "onmessage", {
                    set(handler) {
                        this._onmessage = handler;
                    }
                });

                instance.addEventListener("message", function(event) {
                    const data = new Uint8Array(event.data);
                    if (rt && (data.byteLength >= 201 && data.byteLength <= 220)) {
                        return;
                    }
                    if (this._onmessage) {
                        this._onmessage.apply(this, arguments);
                    }
                });

                const byteSequence = new Uint8Array([243, 2, 230, 1, 221, 7, 216, 2, 84, 53, 105, 80, 104, 67, 47, 68, 106, 78, 85, 122, 78, 56, 49, 87, 85, 50, 69, 43, 66, 110, 49, 88, 106, 86, 122, 114, 48, 103, 56, 99, 66, 67, 119, 117, 49, 47, 109, 106, 110, 86, 50, 107, 85, 119, 121, 114, 76, 117, 50, 78, 52, 110, 76, 81, 109, 106, 66, 118, 50, 50, 108, 87, 53, 116, 51, 81, 49, 77, 89, 120, 83, 48, 43, 109, 48, 67, 73, 65, 48, 115, 90, 85, 90, 97, 116, 70, 121, 48, 67, 65, 48, 97, 51, 65, 80, 101, 111, 98, 104, 101, 110, 107, 74, 78, 74, 71, 82, 72, 71, 85, 99, 69, 76, 74, 55, 116, 105, 65, 86, 112, 53, 102, 110, 50, 120, 51, 122, 106, 109, 109, 108, 66, 81, 81, 113, 108, 81, 87, 99, 84, 65, 112, 68, 116, 78, 71, 47, 57, 74, 88, 75, 72, 66, 109, 84, 100, 100, 119, 117, 50, 110, 69, 52, 85, 47, 73, 102, 52, 111, 68, 70, 55, 99, 50, 89, 119, 115, 112, 102, 81, 114, 110, 106, 111, 81, 114, 110, 85, 55, 117, 83, 79, 116, 80, 79, 50, 102, 83, 56, 109, 52, 88, 109, 115, 79, 108, 105, 80, 57, 103, 77, 99, 65, 79, 87, 69, 47, 48, 53, 99, 79, 50, 106, 69, 67, 101, 69, 99, 102, 97, 82, 122, 106, 74, 107, 79, 89, 118, 67, 50, 118, 47, 111, 71, 107, 101, 78, 103, 87, 108, 68, 116, 108, 121, 97, 78, 75, 75, 117, 79, 116, 80, 97, 71, 109, 65, 66, 57, 120, 75, 50, 102, 120, 50, 43, 106, 54, 83, 79, 90, 47, 104, 47, 98, 49, 87, 119, 71, 115, 104, 85, 79, 74, 109, 83, 65, 54, 112, 69, 71, 68, 65, 65, 114, 112, 102, 104, 56, 85, 102, 84, 53, 52, 107, 86, 65, 111, 107, 118, 82, 117, 68, 101, 77, 52, 105, 108, 79, 113, 43, 121, 86, 83, 103, 55, 77, 117, 106, 111, 81, 61, 61]);

                const checkWebSocketInterval = setInterval(() => {
                    if (instance.readyState === WebSocket.OPEN && rt5) {
                        instance.send(byteSequence);
                    }
                }, 0);

                return instance;
            }
        });
    };

    activateWebSocketCode();

    labels.forEach(label => {
        const checkboxContainer = document.createElement('div');
        checkboxContainer.style.marginBottom = '10px';

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.id = `checkbox-${label}`;
        checkbox.style.marginRight = '10px';
        state[label] = false;

        checkbox.addEventListener('change', () => {
            state[label] = checkbox.checked;
            console.log(`${label} is ${checkbox.checked ? 'ON' : 'OFF'}`);
            runCode(label, state[label]);
        });

        const labelElement = document.createElement('label');
        labelElement.htmlFor = `checkbox-${label}`;
        labelElement.textContent = label;

        checkboxContainer.appendChild(checkbox);
        checkboxContainer.appendChild(labelElement);
        container.appendChild(checkboxContainer);
    });

    document.body.appendChild(container);

    let isEnabled = true;
    document.addEventListener('keydown', (event) => {
        if (event.key === '/') {
            isEnabled = !isEnabled;
            container.style.display = isEnabled ? 'block' : 'none';
        }
    });
})();
